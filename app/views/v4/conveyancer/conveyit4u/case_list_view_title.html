{% extends "v4/conveyancer/layout.html" %}

{% block header %}
  {% include "v4/conveyancer/conveyit4u/includes/header.html" %}
{% endblock %}

{% block main %}
  <div class="container-fluid mb-5">
		<div class="row">
      {% block sidebar %}
        {% include "v4/conveyancer/conveyit4u/includes/sidebar.html" %}
      {% endblock %}      
      <main role="main" class="col-md-10 ml-sm-auto px-4">
        {% block beforeContent %}
        {% endblock %}

        {% block content %}          
          <div class="m-auto pt-3">
            <h1>Cases</h1>
            <hr>
            <h2>Selling</h2>
            <div class="table-responsive">
              <table class="table table-hover" id="tbl_case_list">
                <tbody>          
                  <thead>
                    <tr>
                      <th scope="col">Client</th>                      
                      <th scope="col">Address</th>
                      <th scope="col">Title number</th>
                      <th scope="col">Action required</th>
                    </tr>
                  </thead>            
                  <tr>
                    <td scope="row">Lisa White</td>                    
                    <td>
                      1 Digital Street,<br>
                      Bristol,<br>
                      BS2 8EN
                    </td>
                    <td>ZQV888860</td>
                    <td><a href="#" onclick="requestIssuance(this)">View full title information</a></td>                
                  </tr>
                  <tr>
                    <td scope="row">Jim Smith</td>                  
                    <td>
                      30 Digital Street,<br>
                      Bristol,<br>
                      BS2 8EN
                    </td>
                    <td></td>
                    <td>Waiting for title information</td>
                  </tr>
                  <tr>
                    <td scope="row">Martin Keats</td>                    
                    <td>
                      31 Digital Street,<br>
                      Bristol,<br>
                      BS2 8EN
                    </td>
                    <td></td>
                    <td>Waiting for title information</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <h2>Buying</h2>
            <div class="table-responsive">
              <table class="table table-hover" id="tbl_case_list">
                <tbody>
                  <thead>
                    <tr>
                      <th scope="col">Client</th>
                      <th scope="col">Address</th>
                      <th scope="col">Title number</th>
                      <th scope="col">Action required</th>
                    </tr>
                  </thead>                  
                  <tr>
                    <td scope="row">Sarah Wilkes</td>                      
                    <td>
                      12 Digital Street,<br>
                      Bristol,<br>
                      BS2 8EN
                    </td>                      
                    <td></td>
                    <td>Waiting for title information</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>          
        {% endblock %}
      </main>
    </div>
  </div>  
{% endblock %}

{% block bodyEnd %}
<script>
    function requestIssuance(el) {

      parent_row = $(el).parents('tr').eq(0);
      parent_row.html("<td colspan=5 style=\"text-align:center\"><i class=\"fa fa-spinner fa-spin\"></i></td>")

      //add class to change background color
      parent_row.addClass('row-select');
      //disable further clicks
      $('table tr').find('a').attr('onclick', '');
      setTimeout(function () {
        window.location.href = "{{ nextURL }}";
      }, 2000);
    }

  </script>
  {{ super() }}
{% endblock %}
