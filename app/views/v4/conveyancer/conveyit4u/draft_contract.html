{% extends "v4/conveyancer/layout.html" %}

{% block head %}
  {{ super() }}
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css" />
{% endblock %}

{% block header %}
  {% include "v4/conveyancer/conveyit4u/includes/header.html" %}
{% endblock %}

{% block main %}
  <div class="container-fluid mb-5">
    <div class="row">
      {% block sidebar %}
        {% include "v4/conveyancer/conveyit4u/includes/sidebar.html" %}
      {% endblock %}
        <main role="main" class="ml-sm-auto col-md-10">
          {% block content %}
              <div class="row">
                <div class="col-lg-8 m-auto pt-4">
                  <h1>Draft sales agreement</h1>
                  <form action="{{ nextURL }}" method="GET">
                    <div class="conveyit4u-contract-box form-group">
                      <div class="row pt-2">
                        <div class="col"> <span class="font-weight-bold">Seller:</span></div>
                        <div class="col-6">Lisa White</div>
                      </div>
                      <div class="row pt-2">
                        <div class="col"><span class="font-weight-bold">Buyer:</span> </div>
                        <div class="col-6">David Jones</div>
                      </div>
                      <div class="row pt-2">
                        <div class="col-6"><span class="font-weight-bold">Freehold/leasehold:</span> </div>
                        <div class="col-6">Freehold
                        </div>
                      </div>
                      <div class="row pt-2">
                        <div class="col-6"><span class="font-weight-bold">Address:</span> </div>
                        <div class="col-6">
                            <p>
                                1 Digital Street <br>
                                Bristol <br>
                                BS2 8EN
                            </p>
                        </div>
                      </div>
                      <div class="row pt-2">
                      <div class="col"><span class="font-weight-bold">Title number:</span> </div>
                      <div class="col-lg-6">
                          <input class="form-control" readonly="readonly" type="text" id="title_id" name="title_id" value="ZQV888860">
                      </div>
                      </div>
                      <div class="row pt-2">
                      <div class="col"><span class="font-weight-bold">Specific incumbrances:</span> </div>
                      <div class="col-lg-6">
                          <textarea class="form-control" disabled="disabled">None</textarea>
                      </div>
                      </div>
                      <div class="row pt-2 ">
                      <div class="col"><span class="font-weight-bold">Title guarantee (full/limited):</span> </div>
                      <div class="col-lg-6">
                          <select class="form-control" required="required" id="title_guarantee" name="title_guarantee">
                          <option value="">Select</option>
                          <option value="full">Full</option>
                          <option value="limited">Limited</option>
                          </select>
                      </div>
                      </div>
                      <div class="row pt-2">
                      <div class="col"><span class="font-weight-bold">Completion date:</span> </div>
                      <div class="col-lg-6">
                          <input class="form-control" required="required" id="completion_date" name="completion_date"
                              placeholder="DD/MM/YYY" type="text"/>
                      </div>
                      </div>
                      <div class="row pt-2">
                      <div class="col"><span class="font-weight-bold">Agreement rate (%):</span> </div>
                      <div class="col-lg-6">
                          <input class="form-control" type="number" step="0.01" required="required" id="contract_rate"
                              name="contract_rate">
                      </div>
                      </div>
                      <div class="row pt-2">
                      <div class="col"><span class="font-weight-bold">Purchase price (£):</span> </div>
                      <div class="col-lg-6">
                          <input type="number" step="0.01" class="form-control" min=0 required="required" id="purchase_price"
                              name="purchase_price">
                      </div>
                      </div>
                      <div class="row pt-2">
                      <div class="col"><span class="font-weight-bold">Deposit (£):</span> </div>
                      <div class="col-lg-6">
                          <input type="number" step="0.01" class="form-control" min=0 required="required" id="deposit" name="deposit">
                      </div>
                      </div>
                      <div class="row pt-2">
                      <div class="col"><span class="font-weight-bold">Contents price- if separate (£)</span> </div>
                      <div class="col-lg-6">
                          <input class="form-control" type="text" required="required" name="contents_price" id="contents_price"
                              disabled="disabled" value="N/A">
                      </div>
                      </div>
                      <div class="row pt-2">
                      <div class="col"><span class="font-weight-bold">Balance (£):</span> </div>
                      <div class="col-lg-6">
                          <input class="form-control" type="text" readonly="readonly" min="0" name="balance" id="balance">
                      </div>
                      </div>
                      <div class="row pt-2">
                      <div class="col">
                          <p class="text-center mb-0 tex-justify">The seller will sell and the buyer will buy the property for the
                          purchase price.
                          </p>
                          <p class="col text-center m-2 m-lg-0"><span class="font-weight-bold"><a href="#">Sales agreement terms</a></span></p>
                      </div>
                      </div>
                      <div class="row">
                      <div class="col">
                        <h4>Notices can be sent to:</h4>
                      </div>
                      </div>
                      <div class="row">
                      <div class="col-sm-6 mt-3 mt-lg-0">
                        <h5>Buyer's conveyancer</h5>
                        <span class="font-weight-bold">Name:</span> <br>
                        Samuel Barnes<br>
                        <span class="font-weight-bold">Email:</span> <br>
                        <p style="word-wrap: break-word">
                          samuel.barnes@example.com
                        </p>
                      </div>
                      <div class="col-sm-6 mt-3 mt-lg-0">
                        <h5>Seller's conveyancer</h5>
                        <span class ="font-weight-bold">Name: </span> <br>
                        Natasha Powell<br>
                        <span class="font-weight-bold">Email:</span> <br>
                        natasha.powell@example.com
                      </div>
                    </div>
                  </div>
                  <div class="text-center">
                      <button type="submit" class="btn conveyit4u-bg-button btn-lg white-space-normal">Submit and send to buyer's conveyancer</button>
                  </div>
                </form>
              </div>
            </div>
          {% endblock %}
        </main>
    </div>
  </div>
{% endblock %}

{% block bodyEnd %}
  <script>
    $(document).ready(function () {
      $('#completion_date:not([readonly])').datepicker({
        format: 'dd/mm/yyyy',
        todayHighlight: true,
        autoclose: true
      });

      //set balance = purchase_price-deposit
      $("#purchase_price, #deposit").bind('change', function () {
        $("#balance").val($("#purchase_price").val() - $("#deposit").val());
        $("#deposit").attr({
          "max": $("#purchase_price").val()
        });
      });

    })
  </script>
  {{ super() }}
{% endblock %}
